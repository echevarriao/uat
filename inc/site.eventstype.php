<?php


$all_nations = array("AF" => "Afghanistan",
"AX" => "Ã…land Islands",
"AL" => "Albania",
"DZ" => "Algeria",
"AS" => "American Samoa",
"AD" => "Andorra",
"AO" => "Angola",
"AI" => "Anguilla",
"AQ" => "Antarctica",
"AG" => "Antigua and Barbuda",
"AR" => "Argentina",
"AM" => "Armenia",
"AW" => "Aruba",
"AU" => "Australia",
"AT" => "Austria",
"AZ" => "Azerbaijan",
"BS" => "Bahamas",
"BH" => "Bahrain",
"BD" => "Bangladesh",
"BB" => "Barbados",
"BY" => "Belarus",
"BE" => "Belgium",
"BZ" => "Belize",
"BJ" => "Benin",
"BM" => "Bermuda",
"BT" => "Bhutan",
"BO" => "Bolivia",
"BA" => "Bosnia and Herzegovina",
"BW" => "Botswana",
"BV" => "Bouvet Island",
"BR" => "Brazil",
"IO" => "British Indian Ocean Territory",
"BN" => "Brunei Darussalam",
"BG" => "Bulgaria",
"BF" => "Burkina Faso",
"BI" => "Burundi",
"KH" => "Cambodia",
"CM" => "Cameroon",
"CA" => "Canada",
"CV" => "Cape Verde",
"KY" => "Cayman Islands",
"CF" => "Central African Republic",
"TD" => "Chad",
"CL" => "Chile",
"CN" => "China",
"CX" => "Christmas Island",
"CC" => "Cocos (Keeling) Islands",
"CO" => "Colombia",
"KM" => "Comoros",
"CG" => "Congo",
"CD" => "Congo, The Democratic Republic of The",
"CK" => "Cook Islands",
"CR" => "Costa Rica",
"CI" => "Cote D'ivoire",
"HR" => "Croatia",
"CU" => "Cuba",
"CY" => "Cyprus",
"CZ" => "Czech Republic",
"DK" => "Denmark",
"DJ" => "Djibouti",
"DM" => "Dominica",
"DO" => "Dominican Republic",
"EC" => "Ecuador",
"EG" => "Egypt",
"SV" => "El Salvador",
"GQ" => "Equatorial Guinea",
"ER" => "Eritrea",
"EE" => "Estonia",
"ET" => "Ethiopia",
"FK" => "Falkland Islands (Malvinas)",
"FO" => "Faroe Islands",
"FJ" => "Fiji",
"FI" => "Finland",
"FR" => "France",
"GF" => "French Guiana",
"PF" => "French Polynesia",
"TF" => "French Southern Territories",
"GA" => "Gabon",
"GM" => "Gambia",
"GE" => "Georgia",
"DE" => "Germany",
"GH" => "Ghana",
"GI" => "Gibraltar",
"GR" => "Greece",
"GL" => "Greenland",
"GD" => "Grenada",
"GP" => "Guadeloupe",
"GU" => "Guam",
"GT" => "Guatemala",
"GG" => "Guernsey",
"GN" => "Guinea",
"GW" => "Guinea-bissau",
"GY" => "Guyana",
"HT" => "Haiti",
"HM" => "Heard Island and Mcdonald Islands",
"VA" => "Holy See (Vatican City State)",
"HN" => "Honduras",
"HK" => "Hong Kong",
"HU" => "Hungary",
"IS" => "Iceland",
"IN" => "India",
"ID" => "Indonesia",
"IR" => "Iran, Islamic Republic of",
"IQ" => "Iraq",
"IE" => "Ireland",
"IM" => "Isle of Man",
"IL" => "Israel",
"IT" => "Italy",
"JM" => "Jamaica",
"JP" => "Japan",
"JE" => "Jersey",
"JO" => "Jordan",
"KZ" => "Kazakhstan",
"KE" => "Kenya",
"KI" => "Kiribati",
"KP" => "Korea, Democratic People's Republic of",
"KR" => "Korea, Republic of",
"KW" => "Kuwait",
"KG" => "Kyrgyzstan",
"LA" => "Lao People's Democratic Republic",
"LV" => "Latvia",
"LB" => "Lebanon",
"LS" => "Lesotho",
"LR" => "Liberia",
"LY" => "Libyan Arab Jamahiriya",
"LI" => "Liechtenstein",
"LT" => "Lithuania",
"LU" => "Luxembourg",
"MO" => "Macao",
"MK" => "Macedonia, The Former Yugoslav Republic of",
"MG" => "Madagascar",
"MW" => "Malawi",
"MY" => "Malaysia",
"MV" => "Maldives",
"ML" => "Mali",
"MT" => "Malta",
"MH" => "Marshall Islands",
"MQ" => "Martinique",
"MR" => "Mauritania",
"MU" => "Mauritius",
"YT" => "Mayotte",
"MX" => "Mexico",
"FM" => "Micronesia, Federated States of",
"MD" => "Moldova, Republic of",
"MC" => "Monaco",
"MN" => "Mongolia",
"ME" => "Montenegro",
"MS" => "Montserrat",
"MA" => "Morocco",
"MZ" => "Mozambique",
"MM" => "Myanmar",
"NA" => "Namibia",
"NR" => "Nauru",
"NP" => "Nepal",
"NL" => "Netherlands",
"AN" => "Netherlands Antilles",
"NC" => "New Caledonia",
"NZ" => "New Zealand",
"NI" => "Nicaragua",
"NE" => "Niger",
"NG" => "Nigeria",
"NU" => "Niue",
"NF" => "Norfolk Island",
"MP" => "Northern Mariana Islands",
"NO" => "Norway",
"OM" => "Oman",
"PK" => "Pakistan",
"PW" => "Palau",
"PS" => "Palestinian Territory, Occupied",
"PA" => "Panama",
"PG" => "Papua New Guinea",
"PY" => "Paraguay",
"PE" => "Peru",
"PH" => "Philippines",
"PN" => "Pitcairn",
"PL" => "Poland",
"PT" => "Portugal",
"PR" => "Puerto Rico",
"QA" => "Qatar",
"RE" => "Reunion",
"RO" => "Romania",
"RU" => "Russian Federation",
"RW" => "Rwanda",
"SH" => "Saint Helena",
"KN" => "Saint Kitts and Nevis",
"LC" => "Saint Lucia",
"PM" => "Saint Pierre and Miquelon",
"VC" => "Saint Vincent and The Grenadines",
"WS" => "Samoa",
"SM" => "San Marino",
"ST" => "Sao Tome and Principe",
"SA" => "Saudi Arabia",
"SN" => "Senegal",
"RS" => "Serbia",
"SC" => "Seychelles",
"SL" => "Sierra Leone",
"SG" => "Singapore",
"SK" => "Slovakia",
"SI" => "Slovenia",
"SB" => "Solomon Islands",
"SO" => "Somalia",
"ZA" => "South Africa",
"GS" => "South Georgia and The South Sandwich Islands",
"ES" => "Spain",
"LK" => "Sri Lanka",
"SD" => "Sudan",
"SR" => "Suriname",
"SJ" => "Svalbard and Jan Mayen",
"SZ" => "Swaziland",
"SE" => "Sweden",
"CH" => "Switzerland",
"SY" => "Syrian Arab Republic",
"TW" => "Taiwan(Republic of China)",
"TJ" => "Tajikistan",
"TZ" => "Tanzania, United Republic of",
"TH" => "Thailand",
"TL" => "Timor-leste",
"TG" => "Togo",
"TK" => "Tokelau",
"TO" => "Tonga",
"TT" => "Trinidad and Tobago",
"TN" => "Tunisia",
"TR" => "Turkey",
"TM" => "Turkmenistan",
"TC" => "Turks and Caicos Islands",
"TV" => "Tuvalu",
"UG" => "Uganda",
"UA" => "Ukraine",
"AE" => "United Arab Emirates",
"GB" => "United Kingdom",
"US" => "United States of America",
"UM" => "United States Minor Outlying Islands",
"UY" => "Uruguay",
"UZ" => "Uzbekistan",
"VU" => "Vanuatu",
"VE" => "Venezuela",
"VN" => "Viet Nam",
"VG" => "Virgin Islands, British",
"VI" => "Virgin Islands, U.S.",
"WF" => "Wallis and Futuna",
"EH" => "Western Sahara",
"YE" => "Yemen",
"ZM" => "Zambia",
"ZW" => "Zimbabwe");

$united_states = array(
    'AL'=>'Alabama',
    'AK'=>'Alaska',
    'AZ'=>'Arizona',
    'AR'=>'Arkansas',
    'CA'=>'California',
    'CO'=>'Colorado',
    'CT'=>'Connecticut',
    'DE'=>'Delaware',
    'DC'=>'District of Columbia',
    'FL'=>'Florida',
    'GA'=>'Georgia',
    'HI'=>'Hawaii',
    'ID'=>'Idaho',
    'IL'=>'Illinois',
    'IN'=>'Indiana',
    'IA'=>'Iowa',
    'KS'=>'Kansas',
    'KY'=>'Kentucky',
    'LA'=>'Louisiana',
    'ME'=>'Maine',
    'MD'=>'Maryland',
    'MA'=>'Massachusetts',
    'MI'=>'Michigan',
    'MN'=>'Minnesota',
    'MS'=>'Mississippi',
    'MO'=>'Missouri',
    'MT'=>'Montana',
    'NE'=>'Nebraska',
    'NV'=>'Nevada',
    'NH'=>'New Hampshire',
    'NJ'=>'New Jersey',
    'NM'=>'New Mexico',
    'NY'=>'New York',
    'NC'=>'North Carolina',
    'ND'=>'North Dakota',
    'OH'=>'Ohio',
    'OK'=>'Oklahoma',
    'OR'=>'Oregon',
    'PA'=>'Pennsylvania',
    'RI'=>'Rhode Island',
    'SC'=>'South Carolina',
    'SD'=>'South Dakota',
    'TN'=>'Tennessee',
    'TX'=>'Texas',
    'UT'=>'Utah',
    'VT'=>'Vermont',
    'VA'=>'Virginia',
    'WA'=>'Washington',
    'WV'=>'West Virginia',
    'WI'=>'Wisconsin',
    'WY'=>'Wyoming',
);

if ( ! function_exists('custom_event_type') ) {

// Register Custom Post Type
function custom_event_type() {

	$labels = array(
		'name'                  => _x( 'School Events', 'Post Type General Name', 'text_domain' ),
		'singular_name'         => _x( 'School Event', 'Post Type Singular Name', 'text_domain' ),
		'menu_name'             => __( 'School Events', 'text_domain' ),
		'name_admin_bar'        => __( 'School Event', 'text_domain' ),
		'archives'              => __( 'School Event Archives', 'text_domain' ),
		'parent_item_colon'     => __( 'Parent School Event Item:', 'text_domain' ),
		'all_items'             => __( 'All School Event Items', 'text_domain' ),
		'add_new_item'          => __( 'Add New School Event', 'text_domain' ),
		'add_new'               => __( 'Add School Event', 'text_domain' ),
		'new_item'              => __( 'New School Event', 'text_domain' ),
		'edit_item'             => __( 'Edit School Event', 'text_domain' ),
		'update_item'           => __( 'Update School Event', 'text_domain' ),
		'view_item'             => __( 'View School Event', 'text_domain' ),
		'search_items'          => __( 'Search School Event', 'text_domain' ),
		'not_found'             => __( 'Not found', 'text_domain' ),
		'not_found_in_trash'    => __( 'Not found in Trash', 'text_domain' ),
		'featured_image'        => __( 'School Event Featured Image', 'text_domain' ),
		'set_featured_image'    => __( 'Set School Event featured image', 'text_domain' ),
		'remove_featured_image' => __( 'Remove School Event featured image', 'text_domain' ),
		'use_featured_image'    => __( 'Use as School Event featured image', 'text_domain' ),
		'insert_into_item'      => __( 'Insert into School Event', 'text_domain' ),
		'uploaded_to_this_item' => __( 'Uploaded to this School Event', 'text_domain' ),
		'items_list'            => __( 'Items School Event', 'text_domain' ),
		'items_list_navigation' => __( 'Items School Event navigation', 'text_domain' ),
		'filter_items_list'     => __( 'Filter items School Event list', 'text_domain' ),
	);
	$args = array(
		'label'                 => __( 'School Event', 'text_domain' ),
		'description'           => __( 'Post Type Description', 'text_domain' ),
		'labels'                => $labels,
		'supports'              => array( 'title', 'excerpt', 'author', 'thumbnail', 'revisions', ),
		'taxonomies'            => array( 'evtcategory' ),
		'hierarchical'          => true,
		'public'                => true,
		'show_ui'               => true,
		'show_in_menu'          => true,
		'menu_position'         => 5,
		'show_in_admin_bar'     => true,
		'show_in_nav_menus'     => true,
		'can_export'            => true,
		'has_archive'           => true,		
		'exclude_from_search'   => false,
		'publicly_queryable'    => true,
		'capability_type'       => 'page',
	);
	register_post_type( 'schoolevents', $args );

}
add_action( 'init', 'custom_event_type', 0 );

}

if ( ! function_exists( 'date_taxonomy' ) ) {

// Register Custom Taxonomy
function date_taxonomy() {

	$labels = array(
		'name'                       => _x( 'Event Categories', 'Taxonomy General Name', 'text_domain' ),
		'singular_name'              => _x( 'Event Category', 'Taxonomy Singular Name', 'text_domain' ),
		'menu_name'                  => __( 'Event Categories', 'text_domain' ),
		'all_items'                  => __( 'All Event Categories', 'text_domain' ),
		'parent_item'                => __( 'Parent Event Category', 'text_domain' ),
		'parent_item_colon'          => __( 'Parent Event Category:', 'text_domain' ),
		'new_item_name'              => __( 'New Event Category', 'text_domain' ),
		'add_new_item'               => __( 'Add New Event Category', 'text_domain' ),
		'edit_item'                  => __( 'Edit Event Category', 'text_domain' ),
		'update_item'                => __( 'Update Event Category', 'text_domain' ),
		'view_item'                  => __( 'View Event Category', 'text_domain' ),
		'separate_items_with_commas' => __( 'Separate items with commas', 'text_domain' ),
		'add_or_remove_items'        => __( 'Add or remove event categories', 'text_domain' ),
		'choose_from_most_used'      => __( 'Choose from the most used', 'text_domain' ),
		'popular_items'              => __( 'Popular Items', 'text_domain' ),
		'search_items'               => __( 'Search Event Categories', 'text_domain' ),
		'not_found'                  => __( 'Not Found', 'text_domain' ),
		'no_terms'                   => __( 'No Event Categories', 'text_domain' ),
		'items_list'                 => __( 'Items Event Categories List', 'text_domain' ),
		'items_list_navigation'      => __( 'Items list navigation', 'text_domain' ),
	);
	$rewrite = array(
		'slug'                       => 'evtcategories',
		'with_front'                 => true,
		'hierarchical'               => false,
	);
	$args = array(
		'labels'                     => $labels,
		'hierarchical'               => true,
		'public'                     => true,
		'show_ui'                    => true,
		'show_admin_column'          => true,
		'show_in_nav_menus'          => true,
		'show_tagcloud'              => true,
		'query_var'                  => 'evtcategory',
		'rewrite'                    => $rewrite,
	);
	register_taxonomy( 'evtcategory', array( 'schoolevents' ), $args );

}
add_action( 'init', 'date_taxonomy', 0 );

}

// add date picker

function enqueue_date_picker(){
	
	wp_enqueue_script('jquery');
    wp_enqueue_script('evts-date', get_template_directory_uri() . '/js/field-date.js');
	wp_enqueue_script('jquery-ui', get_site_url() . '/wp-custom/jquery-ui/jquery-ui.min.js');
    wp_enqueue_script('jquery-ui-timepicker-js', get_site_url() . '/wp-custom/jquery/js/jquery.timepicker.js' );

    wp_enqueue_style('jquery-ui-style', get_site_url() . '/wp-custom/jquery-ui/jquery-ui.min.css' );
    wp_enqueue_style('jquery-ui-timepicker', get_site_url() . '/wp-custom/jquery/css/jquery.timepicker.css' );

}

add_action('admin_enqueue_scripts', 'enqueue_date_picker');

add_action( 'add_meta_boxes', 'cd_meta_boxes_add' );

function cd_meta_boxes_add() {

    add_meta_box( 'date-meta-box-id', 'Event Date and Time Details', 'cd_meta_box_date', 'schoolevents', 'normal', 'high' );
    add_meta_box( 'teaser-meta-box-id', 'Event Teaser Text', 'cd_meta_box_teaser', 'schoolevents', 'normal', 'high' );
    add_meta_box( 'locn-meta-box-id', 'Location Details', 'cd_meta_box_locn', 'schoolevents', 'normal', 'high' );
    add_meta_box( 'desc-meta-box-id', 'Event Description', 'cd_meta_box_desc', 'schoolevents', 'normal', 'high' );
    add_meta_box( 'rsvp-meta-box-id', 'RSVP Details', 'cd_meta_box_rsvp', 'schoolevents', 'normal', 'high' );

}

function cd_meta_box_desc(){

	global $post;

	$values = get_post_custom( $post->ID );
	$evt_desc = isset( $values['evt_desc'] ) ?  $values['evt_desc'][0]  : "";
	
	wp_editor( $evt_desc, "evt_desc" );
	
}


function cd_meta_box_teaser(){
	
	global $post;

	$values = get_post_custom($post->ID);
	$teaser = isset( $values['teaser_txt'] ) ? esc_attr( $values['teaser_txt'][0] ) : "";
	
?>
<table>
	<tr>
		<td>
			<label for="my_meta_box_text">Event Teaser</label>
		</td>
		<td>
			<input type = "text" name = "teaser_txt" value = "<?php echo $teaser ?>" id = "teaserForEvtID">
		</td>
	</tr>
</table>
<?php
	
}


function cd_meta_box_rsvp(){
	
	global $post;

	$values = get_post_custom($post->ID);
	$rsvp_req = isset( $values['rsvp_req'] ) ? esc_attr( $values['rsvp_req'][0] ) : "";
	
?>
<table>
	<tr>
		<td>
			<label for="my_meta_box_text">Requires RSVP</label>
		</td>
		<td>
			<select name = "rsvp_req" id = "rsvpForEvtID">
				<option value = "0"<?php if($rsvp_req == 0) { print " selected"; } ?>>No</option>
				<option value = "1"<?php if($rsvp_req == 1) { print " selected"; } ?>>Yes</option>
			</select>
		</td>
	</tr>
</table>
<?php
	
}

function cd_meta_box_date(){

	global $post;

    // We'll use this nonce field later on when saving.
    wp_nonce_field( 'post_profile_nonce', 'profile_nonce' );

$values = get_post_custom( $post->ID );

// print_r($values);

$start_date = isset( $values['start_evt_date'] ) ? esc_attr( $values['start_evt_date'][0] ) : "";
$end_date = isset( $values['end_evt_date'] ) ? esc_attr( $values['end_evt_date'][0] ) : "";
$start_time = isset( $values['start_evt_time'] ) ? esc_attr( $values['start_evt_time'][0] ) : "";
$end_time = isset( $values['end_evt_time'] ) ? esc_attr( $values['end_evt_time'][0] ) : "";
$all_day =  isset( $values['all_day_evt'] ) ? esc_attr( $values['all_day_evt'][0] ) : "no";

?>
<table>
	<tr>
		<td>    <label for="my_meta_box_text">Start Time</label></td>
		<td>    <input type="text" name="start_evt_time" id="startTimeID" class = "timepicker" value="<?php echo $start_time; ?>" /></td>
		<td>    <label for="my_meta_box_text">End Time</label></td>
		<td>    <input type="text" name="end_evt_time" id="endTimeID" class = "timepicker" value="<?php echo $end_time; ?>" /></td>
	</tr>
	<tr>
		<td>    <label for="my_meta_box_text">Start Date of Event</label></td>
		<td>    <input type="text" name="start_evt_date" id="startDateID" class = "datepicker" value="<?php echo $start_date; ?>" /></td>
		<td>    <label for="my_meta_box_text">End Date of Event</label></td>
		<td>    <input type="text" name="end_evt_date" id="endDateID" class = "datepicker" value="<?php echo $end_date; ?>" /></td>
	</tr>
	<tr>
		<td>    <label for="my_meta_box_text">All Day Event</label></td>
		<td><select name = "all_day_evt" id = "allDayEvtID">
			<option value = "0"<?php if($all_day == 0) { print " selected"; } ?>>No</option>
			<option value = "1"<?php if($all_day == 1) { print " selected"; } ?>>Yes</option>
		</select></td>
		<td></td>
		<td></td>
	</tr>
</table>
<?php        

}

function cd_meta_box_locn( $post ){

	global $all_nations;
	global $united_states;
	global $post;

$values = get_post_custom( $post->ID );

$ea_text = isset( $values['evt_address'] ) ? esc_attr( $values['evt_address'][0] ) : "";
$eao_text = isset( $values['evt_address_opt'] ) ? esc_attr( $values['evt_address_opt'][0] ) : "";
$ect_text = isset( $values['evt_city_town'] ) ? esc_attr( $values['evt_city_town'][0] ) : "";
$es_text = isset( $values['evt_state'] ) ? esc_attr( $values['evt_state'][0] ) : "";
$epc_text = isset( $values['evt_postal_code'] ) ? esc_attr( $values['evt_postal_code'][0] ) : "";
$ec_text =  isset( $values['evt_countries'] ) ? esc_attr( $values['evt_countries'][0] ) : "";

?>
<table>
	<tr>
		<td>    <label for="my_meta_box_text">Address 1</label></td>
		<td>    <input type="text" name="evt_address" id="evt_address" placeholder = "Address 1" value="<?php echo $ea_text; ?>" /></td>
	</tr>
	<tr>
		<td>    <label for="my_meta_box_text">Addres 2</label></td>
		<td>    <input type="text" name="evt_address_opt" id="evt_address_opt" placeholder = "Address 2" value="<?php echo $eao_text; ?>" /></td>
	</tr>
	<tr>
		<td>    <label for="my_meta_box_text">City / Town</label></td>
		<td>    <input type="text" name="evt_city_town" id="evt_city_town" placeholder = "City / Town" value="<?php echo $ect_text; ?>" /></td>
	</tr>
	<tr>
		<td>    <label for="my_meta_box_text">State / Province</label></td>
		<td>    <input type="text" name="evt_state" id="evt_state" placeholder = "Connecticut" value="<?php echo $es_text; ?>" /></td>
	</tr>
	<tr>
		<td>    <label for="my_meta_box_text">Postal / Zip Code</label></td>
		<td>    <input type="text" name="evt_postal_code" id="evt_postal_code" placeholder = "Postal / Zip Code" value="<?php echo $epc_text; ?>" /></td>
	</tr>
<tr>
	<td>Country</td>
	<td>    <select name="evt_countries">
	<option>Select Country</option>
    <?php
    foreach($all_nations as $key => $value) {
	if($key == $ec_text):
    ?>
    <option value="<?php print $key ?>" title="<?php print htmlspecialchars($value) ?>" selected><?php print htmlspecialchars($value) ?></option>
    <?php
	else: ?>
    <option value="<?php print $key ?>" title="<?php print htmlspecialchars($value) ?>"><?php print htmlspecialchars($value) ?></option>
	<?php
	endif;
    }
    ?></select></td>
</tr>
</table>

<?php        

}

function events_meta_save( $post_id ) {
 
    // Bail if we're doing an auto save
    if( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) return;
     
    // if our current user can't edit this post, bail
    if( !current_user_can( 'edit_post' ) ) return;

    // Checks save status

    $is_autosave = wp_is_post_autosave( $post_id );
    $is_revision = wp_is_post_revision( $post_id );
 
    // Exits script depending on save status

    if ( $is_autosave || $is_revision ||  !isset( $_POST['profile_nonce'] ) || !wp_verify_nonce( $_POST['profile_nonce'], 'post_profile_nonce' ) ) {

        return;

    }
 
    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'evt_desc' ] ) ) {

        update_post_meta( $post_id, 'evt_desc', $_POST[ 'evt_desc' ] );

    }

    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'teaser_txt' ] ) ) {

        update_post_meta( $post_id, 'teaser_txt', sanitize_text_field( $_POST[ 'teaser_txt' ] ) );

    }

    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'rsvp_req' ] ) ) {

        update_post_meta( $post_id, 'rsvp_req', sanitize_text_field( $_POST[ 'rsvp_req' ] ) );

    }

	
    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'start_evt_time' ] ) ) {

        update_post_meta( $post_id, 'start_evt_time', sanitize_text_field( $_POST[ 'start_evt_time' ] ) );

    }

    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'end_evt_time' ] ) ) {

        update_post_meta( $post_id, 'end_evt_time', sanitize_text_field( $_POST[ 'end_evt_time' ] ) );

    }

    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'start_evt_date' ] ) ) {

        update_post_meta( $post_id, 'start_evt_date', sanitize_text_field( $_POST[ 'start_evt_date' ] ) );

    }

    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'end_evt_date' ] ) ) {

        update_post_meta( $post_id, 'end_evt_date', sanitize_text_field( $_POST[ 'end_evt_date' ] ) );

    }

    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'all_day_evt' ] ) ) {

        update_post_meta( $post_id, 'all_day_evt', sanitize_text_field( $_POST[ 'all_day_evt' ] ) );

    }

    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'evt_address' ] ) ) {

        update_post_meta( $post_id, 'evt_address', sanitize_text_field( $_POST[ 'evt_address' ] ) );

    }

    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'evt_address_opt' ] ) ) {

        update_post_meta( $post_id, 'evt_address_opt', sanitize_text_field( $_POST[ 'evt_address_opt' ] ) );

    }

    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'evt_city_town' ] ) ) {

        update_post_meta( $post_id, 'evt_city_town', sanitize_text_field( $_POST[ 'evt_city_town' ] ) );

    }

    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'evt_state' ] ) ) {

        update_post_meta( $post_id, 'evt_state', sanitize_text_field( $_POST[ 'evt_state' ] ) );

    }

    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'evt_countries' ] ) ) {

        update_post_meta( $post_id, 'evt_countries', sanitize_text_field( $_POST[ 'evt_countries' ] ) );

    }

    // Checks for input and sanitizes/saves if needed

    if( isset( $_POST[ 'evt_postal_code' ] ) ) {

        update_post_meta( $post_id, 'evt_postal_code', sanitize_text_field( $_POST[ 'evt_postal_code' ] ) );

    }
 
}

add_action( 'save_post', 'events_meta_save' );